<!DOCTYPE html>
<meta charset="utf-8">
<title>Word</title>

<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

<style>
  .m-body {
    position: relative;
    font-family: "Helvetica Neue", sans-serif;
    width: 960px;
    margin: auto;
    margin-bottom: 1em;
    margin-top: 20px;
  }

  #presets a {
    border-left: solid #666 1px;
    padding: 0 10px;
  }

  #presets a.first {
    border-left: none;
  }

  #keyword {
    width: 300px;
  }

  #fetcher {
    width: 500px;
  }

  #keyword,
  #go {
    font-size: 1.5em;
  }

  #text {
    width: 100%;
    height: 100px;
  }

  p.copy {
    font-size: small;
  }

  #form {
    font-size: small;
    position: relative;
  }

  hr {
    border: none;
    border-bottom: solid #ccc 1px;
  }

  a.active {
    text-decoration: none;
    color: #000;
    font-weight: bold;
    cursor: text;
  }

  #angles line,
  #angles path,
  #angles circle {
    stroke: #666;
  }

  #angles text {
    fill: #333;
  }

  #angles path.drag {
    fill: #666;
    cursor: move;
  }

  #angles {
    text-align: center;
    margin: 0 auto;
    width: 350px;
  }

  #angles input,
  #max {
    width: 42px;
  }

  .m-full-with {
    width: 100%;
  }
</style>
<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
<div class="m-body">
  <!-- Colored raised button -->
  <div id="vis"></div>


  <form id="form">

    <div hidden>
      <p style="position: absolute; right: 0; top: 0" id="status"></p>

      <div style="text-align: center">
        <div id="presets"></div>
        <div id="custom-area">
          <p>
            <label for="text">Paste your text below!</label>
            <p>
              <textarea id="text"></textarea>
              <button id="go" type="submit">Go!</button>
        </div>
      </div>


      <div style="float: right; text-align: right">
        <p>
          <label for="max">Number of words:</label>
          <input type="number" value="6000" min="1" id="max">
          <p>
            <label for="per-line">
              <input type="checkbox" id="per-line"> One word per line</label>
            <!--<p><label for="colours">Colours:</label> <a href="#" id="random-palette">get random palette</a>-->
            <p>
              <label>Download:</label>
              <button>SVG</button>
              <!-- |
            <a id="download-png" href="#">PNG</a>-->
      </div>

      <div style="float: left">
        <p>
          <label>Spiral:</label>
          <label for="archimedean">
            <input type="radio" name="spiral" id="archimedean" value="archimedean" checked="checked"> Archimedean</label>
          <label for="rectangular">
            <input type="radio" name="spiral" id="rectangular" value="rectangular"> Rectangular</label>
          <p>
            <label for="scale">Scale:</label>
            <label for="scale-log">
              <input type="radio" name="scale" id="scale-log" value="log" checked="checked"> log n</label>
            <label for="scale-sqrt">
              <input type="radio" name="scale" id="scale-sqrt" value="sqrt"> √n</label>
            <label for="scale-linear">
              <input type="radio" name="scale" id="scale-linear" value="linear"> n</label>
            <p>
              <label for="font">Font:</label>
              <input type="text" id="font" value="Impact">
      </div>

      <div id="angles">
        <p>
          <input type="number" id="angle-count" value="5" min="1">
          <label for="angle-count">orientations</label>
          <label for="angle-from">from</label>
          <input type="number" id="angle-from" value="-60" min="-90" max="90"> °
          <label for="angle-to">to</label>
          <input type="number" id="angle-to" value="60" min="-90" max="90"> °
      </div>
    </div>

  </form>
</div>


<script src="js/d3.min.js"></script>
<script src="js/cloud.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>

<script>

  var filePath = getUrlParameter("path");
  loadText(filePath);

  setTimeout(stopLoading, 6000);
  function loadText(path) {
    $.get(path, function (data) {
      if (data != null)
        parseText(data);
    }, 'text');
  }

function stopLoading(){
  $('.mdl-spinner').removeClass('is-active');
}


  function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
      sURLVariables = sPageURL.split('&'),
      sParameterName,
      i;

    for (i = 0; i < sURLVariables.length; i++) {
      sParameterName = sURLVariables[i].split('=');

      if (sParameterName[0] === sParam) {
        return sParameterName[1] === undefined ? true : sParameterName[1];
      }
    }
  };
</script>